<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- jQuery and Zod -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://unpkg.com/zod@3.22.4/lib/index.umd.js"></script>

  <!-- Custom CSS & JS -->
  <link rel="stylesheet" href="../static/css/feed-style.css" />
  <script type="module" src="../static/js/app.js"></script>
  <script type="module" src="../static/js/validation/addpost.js"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="feed-background">

    <!-- Navigation Bar -->
    <nav class="navbar">
    <div class="navbar-left">
        <img src="../static/img/logo-no-name.png" alt="ISKONEK Logo" class="nav-logo">
        <img src="../static/img/logo-title.png" alt="ISKONEK Forum Text" class="nav-title-img">
    </div>
    <div class="navbar-right">
        <a href="#" class="nav-link-active"><i class="bi bi-house-door"></i></a>
        <a href="#" class="nav-link"><i class="bi bi-person"></i></a>
        <a href="#" class="nav-link"><i class="bi bi-info-circle"></i></a>
        <button id="logoutBtn" type="submit" class="logout-btn">LOGOUT</button>
    </div>
    </nav>

    <!-- Search bar aligned to the right -->
    <div class="search-bar-wrapper">
    <div class="input-icon">
        <input type="text" id="search" class="form-control" placeholder="SEARCH POSTS..." />
        <button type="submit" class="search-btn">
        <i class="bi bi-search"></i>
        </button>
    </div>
    </div>

    <!-- Filter Feed -->
    <div class="filter-feed d-flex flex-column align-items-end mb-4">
      <div class="filter-label">
        <i class="bi bi-funnel-fill me-2 text-white"></i>
        <span class="text-white fw-semibold">FILTER FEED</span>
      </div>
      <div class="filter-buttons d-flex flex-wrap justify-content-end gap-2">
        <button class="filter-btn active">FRESHMAN</button>
        <button class="filter-btn">REQUIREMENTS</button>
        <button class="filter-btn">PROGRAMMING</button>
        <button class="filter-btn active">REVIEW</button>
        <button class="filter-btn">RESOURCE</button>
        <button class="filter-btn">LOST & FOUND</button>
      </div>
    </div>

    <div class="feed-container">

    </div>
    <!-- Post Template goes here -->
    <div class="feed-container">

    </div>
    </div>
  </div>

  <a href="#" class="add-post-btn" data-bs-toggle="modal" data-bs-target="#addPostModal" title="Add Post">
    <i class="bi bi-plus-lg"></i>
  </a>

  <!-- Add Post Modal -->
  <div class="modal fade" id="addPostModal" tabindex="-1" aria-labelledby="addPostModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
      <div class="modal-content create-post-modal">
        <div class="modal-header border-0">
          <h2 class="modal-title w-100 text-center fw-bold" id="addPostModalLabel">CREATE POST</h2>
        </div>
        <hr class="modal-divider" />
        <form id="postForm">
        <div class="modal-body">
          <div class="row g-4">
            <!-- Left column -->
            <div class="col-md-7">
              <div class="mb-3">
                <label class="form-label">TITLE (REQUIRED)</label>
                <div class="input-with-icon">
                  <i class="bi bi-file-post"></i>
                  <input id="postTitle" type="text" class="form-control pill-input" placeholder="INPUT POST TITLE">
                </div>
                <div class="invalid-feedback" id="postTitleError"></div>
              </div>

              <div class="mb-3">
                <label class="form-label">DESCRIPTION</label>
                <textarea id="postContent" class="form-control pill-textarea" rows="4" placeholder="INPUT DESCRIPTION"></textarea>
                <div class="invalid-feedback" id="postContentError"></div>
              </div>

              <div class="mb-2 small-text">
                DO YOU WANT TO ATTACH FILES? MAKE SURE ITâ€™S IN PDF FORMAT AND LESS THAN 500KB.
              </div>
              <div class="input-with-icon file-pill">
                <i class="bi bi-paperclip"></i>
                <input id="postAttachment" type="file" class="form-control pill-input file-input" accept=".pdf" />
                <div class="invalid-feedback" id="postAttachmentError"></div>
              </div>
            </div>

            <!-- Right column -->
            <div class="col-md-5">
              <div class="mb-3">
                <label class="form-label">
                  <i class="bi bi-tags"></i> CHOOSE TAGS
                </label>
                <div class="tag-buttons">
                  <button type="button" id="freshman" class="tag-btn">FRESHMAN</button>
                  <button type="button" id="requirements" class="tag-btn">REQUIREMENTS</button>
                  <button type="button" id="programming" class="tag-btn">PROGRAMMING</button>
                  <button type="button" id="review" class="tag-btn">REVIEW</button>
                  <button type="button" id="resource" class="tag-btn">RESOURCE</button>
                  <button type="button" id="lost-and-found" class="tag-btn">LOST & FOUND</button>
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label">DO YOU WANT TO POST IT ANONYMOUSLY?</label>
                <br />
                <label class="switch">
                  <input id="postAnonymous" type="checkbox" id="anonymousToggle">
                  <span class="slider round"></span>
                </label>
                <div class="invalid-feedback" id="postAnonymousError"></div>
              </div>

            </div>
          </div>
        </div>

        <!-- Footer -->
        <div class="modal-footer border-0">
          <div class="invalid-feedback" id="postOverallError"></div>
          <button id="submitPost" type="button" class="footer-btn post-btn">POST</button>
          <button type="button" class="footer-btn cancel-btn" data-bs-dismiss="modal">CANCEL</button>
        </div>
        </form>
      </div>
    </div>
  </div>

  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const buttons = document.querySelectorAll(".filter-btn");

    buttons.forEach(function (btn) {
      btn.addEventListener("click", function () {
        btn.classList.toggle("active");
        console.log(btn.textContent + " toggled");
      });
    });
  });

  document.querySelectorAll('.tag-btn').forEach(button => {
    button.addEventListener('click', () => {
      button.classList.toggle('active');
    });
  });
</script>
</body>
</html>